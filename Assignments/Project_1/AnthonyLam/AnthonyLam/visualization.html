<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>DIGITAL RESIDUE — Visualization</title>
  <link rel="stylesheet" href="./style.css?v=1000">
</head>

<body data-page="viz">

  <a class="back" href="./index.html">← BACK</a>

  <h1 class="viz-title">MY SCREEN TIME</h1>
  <p class="viz-sub">Hover a blob to reveal the app + time.</p>

  <div id="blob-stage"></div>

  <div id="tip" class="tip"></div>

  <script src="./data.js?v=1000"></script>

  <script>
    const stage = document.getElementById("blob-stage");
    const tip = document.getElementById("tip");

    const ITEMS = (typeof APPS !== "undefined") ? APPS : [];

    if (!ITEMS.length) {
      stage.innerHTML = `<p style="opacity:.7">No APPS data found in data.js.</p>`;
    } else {
      const maxH = Math.max(...ITEMS.map(x => Number(x.hours || 0)), 1);

      ITEMS.forEach(item => {
        const blob = document.createElement("div");
        blob.className = "blob";

        const h = Number(item.hours || 0);

        // SIZE BY TIME (bigger time = bigger blob)
        const size = 380 + (h / maxH) * 520;
        blob.style.width = size + "px";
        blob.style.height = size + "px";

        // POSITION (random but contained)
        blob.style.left = (Math.random() * 85) + "%";
        blob.style.top  = (Math.random() * 75) + "%";

        // COLOR CODED PER APP
        blob.style.background = `radial-gradient(circle,
          ${item.color} 0%,
          rgba(255,255,255,0) 70%)`;

        // HOVER LABEL
        blob.addEventListener("mouseenter", () => {
          tip.textContent = `${item.app} — ${h.toFixed(1)} HOURS`;
          tip.style.opacity = "1";
        });

        blob.addEventListener("mouseleave", () => {
          tip.style.opacity = "0";
        });

        stage.appendChild(blob);
      });

      // TOOLTIP FOLLOWS MOUSE
      document.addEventListener("mousemove", (e) => {
        tip.style.left = (e.clientX + 14) + "px";
        tip.style.top  = (e.clientY + 14) + "px";
      });
    }
  </script>

</body>
</html>
